---
date: "2024-03-19"
title: "NextJS ì´ë¯¸ì§€ ë¡œë”© ì‹œì— Blur ì²˜ë¦¬í•˜ê¸°"
tags: ["nextjs", "plaiceholder"]
series: ["blog"]
description: "plaiceholder ì´ìš©í•´ì„œ nextjs ì´ë¯¸ì§€ ë¡œë”© ì‹œì— ì´ë¯¸ì§€ Blur ì²˜ë¦¬í•˜ê¸°"
thumbnail: "https://github.com/coyo-hm/COYO-HM.github.io/assets/56423604/73748c95-2e16-4ff9-ae8d-a3bba5deb500"
published: true
---

ë¸”ë¡œê·¸ í™”ë©´ ì´ˆê¸° ì§„ì… ì‹œ ë˜ëŠ” ìƒˆë¡œê³ ì¹¨ ì‹œì— ì´ë¯¸ì§€ ë¡œë”© ì‹œì— ì¢€ ë” ë§¤ë„ëŸ¬ìš´ ì‚¬ìš©ì ê²½í—˜ì„ ìœ„í•´ Nextjs ì—ì„œ ì œê³µí•˜ëŠ” `<Image/>` íƒœê·¸ì˜ `placeholder`  `props`ë¥¼ í†µí•´ `blur`ë¥¼ ì ìš©í•´ì£¼ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.

# blur ì ìš©í•˜ê¸°

## ì •ì  ì´ë¯¸ì§€ì¼ ê²½ìš°

ì •ì  ì´ë¯¸ì§€ì¸ ê²½ìš° êµ‰ì¥íˆ ê°„ë‹¨í•©ë‹ˆë‹¤. ê·¸ëƒ¥ `placeholder`ì˜ ì˜µì…˜ì„ `blur`ë¡œ ì§€ì •í•´ ì£¼ê¸°ë§Œ í•˜ë©´, `blurDataURL`ë¥¼ ì„¤ì •í•´ ì£¼ì§€ ì•Šì•„ë„ Nextjsê°€ ìë™ìœ¼ë¡œ ìƒì„±í•´ ì¤ë‹ˆë‹¤.

```jsx
import Image from "next/image";
import ViewSource from "../../components/view-source";
import mountains from "../../public/mountains.jpg";

const PlaceholderBlur = () => (
  <div>
    <ViewSource pathname="app/placeholder/page.tsx" />
    <h1>Image Component With Placeholder Blur</h1>
    <Image
      alt="Mountains"
      src={mountains}
      placeholder="blur"
      width={700}
      height={475}
      style={{
        maxWidth: "100%",
        height: "auto",
      }}
    />
  </div>
);

export default PlaceholderBlur;
```

[[ì¶œì²˜] nextjs examples](https://github.com/vercel/next.js/blob/canary/examples/image-component/app/placeholder/page.tsx)

## ë™ì  ì´ë¯¸ì§€ì¼ ê²½ìš°

ë‹¤ë§Œ ì €ì²˜ëŸ¼ ê²½ìš° ë¸”ë¡œê·¸ì˜ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²½ìš°ì—ëŠ” `blurDataURL` ìƒì„±í•´ì„œ ì…ë ¥í•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

ì§ì ‘ ìƒì„±í•´ë„ ë˜ì§€ë§Œ, ì €ì˜ ê²½ìš° Nextjs ì—ì„œ ê¶Œì¥í•˜ëŠ” `plaiceholder` ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

### ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

`plaiceholder` ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `plaiceholder` ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë¯¸ì§€ ìµœì í™” ë¼ì´ë¸ŒëŸ¬ë¦¬ `sharp` **ë¥¼ í•¨ê»˜ ì„¤ì¹˜í•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.**

```bash
  # npm ì‚¬ìš© ì‹œ
  npm i sharp plaiceholder

  # yarn ì‚¬ìš©ì‹œ
  yarn add sharp plaiceholder
```

### ì½”ë“œ ì‘ì„±

ë‹¤ë¥¸ ë¶€ë¶„ì—ë„ ì‰½ê²Œ ì ìš©í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```tsx
// getBlurImg.ts
import { getPlaiceholder } from "plaiceholder";

const getBlurImg = async (imgSrc: string) => {
  try {
    const buffer = await fetch(imgSrc).then(async (res) =>
      Buffer.from(await res.arrayBuffer())
    );
    const { base64 } = await getPlaiceholder(buffer, { size: 10 });
    return base64;
  } catch (e) {
    console.log(e);
  }
};

export default getBlurImg;

```

<aside>
  ğŸ’¡ `getPlaiceholder`

  `[options](https://plaiceholder.co/docs/usage#parameters)`ìœ¼ë¡œ `size`, `autoOrient`, `brightness`, `format,` `hue`,
  `lightness`, `removeAlpha`, `saturation` ë“±ì„ ì§€ì •í•˜ì—¬ ì´ë¯¸ì§€ì— ë‹¤ì–‘í•œ ì„¤ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

</aside>

ì‘ì„±í•œ í•¨ìˆ˜ë¥¼ ì»´í¬ë„ŒíŠ¸ì— ì ìš©í•´ ë´…ì‹œë‹¤.

(ì°¸ê³ , `index.tsx` â‡’ `Carousel.tsx` â‡’ `ActivePostCard.tsx` ìœ¼ë¡œ `post props` ì „ë‹¬)

```tsx
// index.tsx
...

export const getStaticProps: GetStaticProps = async () => {
  const recentPosts = await getPosts(0, 5);
  const allTags = await getAllTags();
  const allSeriesInfo = await getAllSeriesInfo();

  const posts = await Promise.all(
    recentPosts.map(async (post: PostType) => {
      const blurThumbnail = await getBlurImg(post.frontMatter.thumbnail);
      return { ...post, frontMatter: { ...post.frontMatter, blurThumbnail } };
    })
  );

  return {
    props: {
      recentPosts: posts,
      tags: allTags,
      allSeriesInfo: allSeriesInfo,
    },
  };
};
```

```tsx
// ActivePostCard.tsx

...

interface Props extends PostType {
  currentIndex: number;
  direction: DirectionType;
  allSeriesInfo: SeriesAttributeTableType;
}

const ActivePostCard = ({
  currentIndex,
  direction,
  allSeriesInfo,
  fields: { slug },
  frontMatter: {
    title,
    tags,
    date,
    thumbnail,
    description,
    series,
    blurThumbnail,
  },
}: Props) => {
 ...
  return (
    <Link href={`/post/${slug}`} aria-label={`link-${slug}`}>
	     ...
         <Image
            src={thumbnail}
            alt={title}
            placeholder={"blur"}
            blurDataURL={blurThumbnail}
          />
         ...
    </Link>
  );
};

export default ActivePostCard;

```

## ì ìš© ê²°ê³¼

### ì ìš© ì „

<img alt="before-blur"
     src="https://github.com/coyo-hm/COYO-HM.github.io/assets/56423604/00f74eb3-373f-424a-970f-703835e3c224" />

### ì ìš© í›„


<img alt="after-blur"
     src="https://github.com/coyo-hm/COYO-HM.github.io/assets/56423604/a62aea31-4d56-4d7f-a924-64fd0c599be9" />

ì´ë¯¸ì§€ ë¡œë”© ì‹œì— `blur` íš¨ê³¼ê°€ ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# ì°¸ì¡°

- [[NextJS] image placeholder](https://nextjs.org/docs/pages/api-reference/components/image#placeholder)
- [[plaiceholder] base64](https://plaiceholder.co/docs/usage#base64)